<script src='/socket.io/socket.io.js'></script>
<script>
onload=function(){
  socket=io.connect('/');
  document.body.style.background='red';
  socket.on('connect',function(){
    document.body.style.background='white'
    show('connect','connect');
  })
  socket.on('message',function(data){
    show('message','#'+data.id+'> '+data.message);
  })
  socket.on('join',function(data){
    show('join','#'+data.id+' joined '+data.count);
  })
  socket.on('leave',function(data){
    show('leave','#'+data.id+' leaved '+data.count);
  })
  socket.on('disconnect',function(){
    show('disconnect','disconnect');
    document.body.style.background='red'
  })
  send=function(message){
    socket.emit('message',message)
    show('message','> '+message);
  }
  show=function(type,msg){
    div=document.createElement('div');
    div.textContent=msg;
    div.className=type;
    messages=document.querySelector('.messages');
    messages.appendChild(div);
    messages.scrollTop=1000000000
  }
}
</script>
<style>
.messages{height:80%;overflow:auto;}
</style>
<form onsubmit="try{send(firstChild.value)}catch(e){};firstChild.value='';return false"><input></form>
<div class='messages'></div>